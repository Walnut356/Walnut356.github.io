<!doctype html><html dir=auto lang=en><head><meta charset=utf-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name=viewport><meta content="index, follow" name=robots><title>Simulating Starcraft Part 2 - Data Wrangling</title><meta name=keywords><meta name=description><meta content=Walnut356 name=author><link href=https://walnut356.github.io/posts/simulating-starcraft-p2/ rel=canonical><link href=/styles.css rel=stylesheet><link href=/override.css rel=stylesheet><link href=/syntax-theme.css rel=stylesheet><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100..900&display=swap" rel=stylesheet><link crossorigin href=/CascadiaCode-Regular.woff2 rel=font><link href=/favicon.png rel=icon type=image/x-icon><link href=https://walnut356.github.io/atom.xml rel=alternate title=RSS type=application/atom+xml><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script src="https://www.googletagmanager.com/gtag/js?id=G-PKLX5VEB4H" async></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PKLX5VEB4H');</script><body class=dark id=top><script>if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }</script><header class=header><nav class=nav><div class=logo><a title="Cracking The Shell (Alt + H)" accesskey=h href=https://walnut356.github.io> Cracking The Shell </a><div class=logo-switches><button title="(Alt + T)" accesskey=t id=theme-toggle><svg viewbox="0 0 24 24" fill=none height=18 id=moon stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg> <svg viewbox="0 0 24 24" fill=none height=18 id=sun stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 r=5></circle><line x1=12 x2=12 y1=1 y2=3></line><line x1=12 x2=12 y1=21 y2=23></line><line x1=4.22 x2=5.64 y1=4.22 y2=5.64></line><line x1=18.36 x2=19.78 y1=18.36 y2=19.78></line><line x1=1 x2=3 y1=12 y2=12></line><line x1=21 x2=23 y1=12 y2=12></line><line x1=4.22 x2=5.64 y1=19.78 y2=18.36></line><line x1=18.36 x2=19.78 y1=5.64 y2=4.22></line></svg></button><ul class=lang-switch><li></ul></div></div><ul id=menu><li><a href=https://walnut356.github.io/archive title=Archive> <span>Archive</span> </a><li><a href=https://walnut356.github.io/search title=Search> <span>Search</span> </a><li><a href=https://walnut356.github.io/tags title=Tags> <span>Tags</span> </a></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://walnut356.github.io>Home</a> »  <a href=https://walnut356.github.io/posts/>Posts</a> »  <a href=https://walnut356.github.io/posts/simulating-starcraft-p2/>Simulating Starcraft Part 2 - Data Wrangling</a></div><h1 class=post-title>Simulating Starcraft Part 2 - Data Wrangling</h1><div class=post-meta><span title="2024-06-02 00:00:00 +0000">2024-06-02</span> · 15 min · 2889 words</div></header><div class=toc><details><summary title="(Alt + C)" accesskey=c><span class=details>Table of Contents</span></summary> <div class=inner><ul><li><a aria-label="Starcraft's Database" href=#starcraft-s-database>Starcraft's Database</a><li><a aria-label=Parsing href=#parsing>Parsing</a> <ul><li><a aria-label=Structure href=#structure>Structure</a><li><a aria-label=Wrangling href=#wrangling>Wrangling</a></ul><li><a aria-label=Codegen href=#codegen>Codegen</a></ul></div></details></div><div class=post-content><p>Oh how naive I was when I thought I'd be moving on to pathfinding and abilities. I had hoped some of the game's mechanics would function better in isolation, so I could gradually add complexity on top of the tracer bullet in a modular way. Unfortunately, that doesn't seem possible without a huge refactoring burden every time I add the next layer. It'll be more worth my time to properly architect it right now, and build it from the ground up with all of the systems it'll need.</p><span id=continue-reading></span><p>With that in mind, the best way to figure out what my requirements are, fully, is to look directly into the game's data and see what <em>its</em> requirements are. Conveniently, I needed to do this anyway as I'd rather avoid the tedium of entering all of the unit data by hand.<p>As always, the code for this project is available <a href=https://github.com/Walnut356/Starcraft-Simulator rel=noopener target=_blank>here</a><h1 id=starcraft-s-database>Starcraft's Database<a aria-hidden=true class=anchor hidden href=#starcraft-s-database>#</a></h1><p>When inspecting starcraft 2's installed files a while back, I noticed what looked like a proprietary database format and didn't look too much further into it.<p><img alt='37gb "data" folder containing index files' src=https://walnut356.github.io/posts/simulating-starcraft-p2/image.png><p>While reading Game Engine Architecture, xml databases were brought up and I had a House moment - I remembered the "view xml" button in the editor. Instead of having to manually enter unit data, I could make a quick parser for the xml. I'd been mulling over creating some sort of external json data store for the same purpose anyway, so this would be perfect. There's an "export balance data" button in the editor that dumps 1000 xml files, one for each unit and structure. Unfortunately, the data from this dump is far from complete. It'll make more sense in a moment, but it looks like this function just traverses the <code>unitdata.xml</code>, resolves the versioning and links, cleans up the xml structure, and outputs a file for each unit. This ends up hiding some of the nitty-gritty of the weapon functionality that I can't really ignore.<p>Investigating further, I stumbled across an old reddit thread that pointed me to <a href=http://www.zezula.net/en/casc/main.html rel=noopener target=_blank>this website</a> which explains the proprietary database format that blizzard games use, and provides a GUI application called <code>cascview</code> to inspect the data. Using <code>cascview</code>, I was able to extract the <code>liberty</code>, <code>swarm</code>, <code>void</code>, and <code>voidmulti</code> <code>.sc2mod/base.sc2data/gamedata</code> folders, which contain xml formatted data for every... well, every <em>thing</em> in the game. More data than we need to be honest. It's still going to be a bit of work to make it usable though.<p>The game and editor seem to work based on a sort of "versioning" system. <code>voidmulti</code> does not contain all the data for all the current 1v1 units as one might hope. Instead, the base data is held in the expansion where it was first defined, and future files are applied "on top" of old files, replacing any relevant data fields. While I'm sure that makes some things very easy for the developers, it poses a slight annoyance for me, as I now more or less have to do the same. Additionally, there's quite a bit of "unused" data, even within the subset of 1v1 units. Many units still have various forms of alpha/beta attributes (e.g. adept shield upgrade, replicant unit data, mothership core, warhound, herc). Some things are also structured in such a way that makes it hard to parse without replicating the engine's struct layout - something I've been skirting the line of, as I can take many more shortcuts if I don't.<p>I have a couple of options:<ul><li>Parse the data into sructs, store the structs as raw binary data, and then <code>mem::transmute</code> them from the raw data at runtime<li>Parse the data into an intermediate format, generate Rust source files with the <code>const</code> declarations in them, and insert those files into the crate before compiling</ul><p>I wasn't super comfortable with source code generation prior to reading Crafting Interpreters, but they did it a lot for their <code>jlox</code> interpreter (since Java doesn't have macros) and it grew on me. I'd generated assembly and vm code before when working on <a href=https://github.com/Walnut356/hack_emu rel=noopener target=_blank>nand2tetris from scratch in Rust</a>, but for some reason it hadn't occurred to me to generate high-level source code. In any case, I'm not super fond of either idea. The second one sounds more like what I want, but also feels like it leaves the system less modular than the first. I've done binary formats before though, so I may as well get some more experience with codegen.<h1 id=parsing>Parsing<a aria-hidden=true class=anchor hidden href=#parsing>#</a></h1><p>Parsing these "loose" data formats in Rust can feels a little painful sometimes, but xml felt notably worse than the json, amazon ion, and some other event-based systems I've worked with before. Stringly-typed is already rough, but xml feels a lot like completely unstructured data, so the parsing code ends up requiring a lot of nested loops and matches. I used <code>roxmltree</code>, which had great performance, but I almost would have liked something a bit more "batteries included" like <code>serde_json</code> where it just dumps everything into a big <code>HashMap</code> with pre-existing enum-types.<h2 id=structure>Structure<a aria-hidden=true class=anchor hidden href=#structure>#</a></h2><p>The xml documents are grouped by "type" (e.g. <code>unitdata.xml</code>, <code>weapondata.xml</code>, <code>abildata.xml</code>) and some of the nodes are just links to other data via string IDs:<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Catalog</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CUnit</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Zealot<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">DeathRevealRadius</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>3<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Race</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Prot<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Mob</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Multiplayer<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">LifeStart</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>100<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">LifeMax</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>100<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">LifeArmor</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">LifeArmorName</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Unit/LifeArmorName/ProtossArmor<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ShieldsStart</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>50<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        ...
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">WeaponArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Link</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PsiBlades<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        ...
</span></code></pre><p>This is... less than ideal. It's not so bad when one file links to another file like this, but it's hardly ever just one link. And those links lead to more links. Sometimes, they link right back to the file you were just in. Untangling this spaghetti by hand so I could understand it enough to write the parser was the first time I've ever understood the market for ultrawide monitors.<p>If you look up the <code>WeaponArray</code> link, <code>PsiBlades</code>, in the <code>weapondata</code> file, you're treated to this listing:<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CWeaponLegacy</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PsiBlades<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Icon</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Assets\Textures\btn-upgrade-protoss-groundweaponslevel0.dds<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">TargetFilters</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Ground,Visible;Missile,Stasis,Dead,Hidden,Invulnerable<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Range</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Period</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1.2<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">DamagePoint</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Effect</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PsiBladesBurst<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Options</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Melee<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">DisplayAttackCount</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>2<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CWeaponLegacy</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>Oh, you wanted to know how much damage they deal? Sorry, that information is in another castle. Follow the <code>Effect</code> link into <code>effectdata.xml</code>.<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectCreatePersistent</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PsiBladesBurst<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodCount</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>2<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">WhichLocation</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>TargetUnit<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">TimeScaleSource</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Caster<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Flags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Channeled<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicEffectArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PsiBlades<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicPeriodArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicPeriodArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.28<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectCreatePersistent</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>Still no damage. That's because this is the handling for Zealots attacking twice - the <code>PeriodicEffectArray</code> tells us the weapon effect that will apply, and the listings under it describe how many times, and at what intervals they occur. So we follow the <code>PsiBlades</code> link (thankfully in the same file) and finally we can see the rest of the weapon's stats:<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectDamage</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PsiBlades<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">parent</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>DU_WEAP<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Amount</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>8<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Death</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Eviscerate<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ValidatorArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>NotHidden<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectDamage</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>Neat...<p>Not everything can be that bad though, right? How about marauder attacks? The <code>WeaponLink</code> is to <code>PunisherGrenades</code>:<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CWeaponLegacy</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PunisherGrenades<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Terran<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">DisplayEffect</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PunisherGrenadesU<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">TargetFilters</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Ground,Visible;Missile,Stasis,Dead,Hidden,Invulnerable<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Range</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>6<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Period</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1.5<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">DamagePoint</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Backswing</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Effect</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PunisherGrenadesLM<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Icon</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Assets\Textures\btn-upgrade-terran-infantryweaponslevel0.dds<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CWeaponLegacy</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>So there's a <code>DisplayEffect</code> leading to <code>PunisherGrenadesU</code> and an <code>Effect</code> leading to <code>PunisherGrenadesLM</code>.<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectDamage</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PunisherGrenadesU<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">parent</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>DU_WEAP<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Terran<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Kind</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Ranged<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Amount</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>10<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Death</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Blast<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">AttributeBonus</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Armored<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>10<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectDamage</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>Cool, it looks like the <code>DisplayEffect</code> link just takes us directly to the damage values. But wait, what about the projectile? I need the speed and acceleration values for that. It looks like LM is short for "Launch Missile" (but don't think that these suffixes are used with any sort of consistency, that would be too easy). Following the <code>PunisherGrenadesLM</code> link takes us to this listing:<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectLaunchMissile</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PunisherGrenadesLM<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Terran<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ImpactEffect</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PunisherGrenadesSet<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Movers</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Link</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PunisherGrenadesWeapon<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectLaunchMissile</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>The <code>ImpactEffect</code> links to an object that applies the damage and, conditionally, the slow from concussive shells. The <code>Movers</code> links to the <code>moverdata.xml</code> file, which has our motion phases. But wait, back up. Why didn't the zealot's weapon data have a <code>DisplayEffect</code>? And for that matter, the Stalker's <code>ParticleDisruptors</code> don't have an <code>Effect</code>:<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CWeaponLegacy</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ParticleDisruptors<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Icon</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Assets\Textures\btn-upgrade-protoss-groundweaponslevel0.dds<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">DisplayEffect</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ParticleDisruptorsU<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">TargetFilters</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Visible;Missile,Stasis,Dead,Hidden,Invulnerable<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Range</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>6<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Period</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1.44<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CWeaponLegacy</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>Up til now, I've been using <code>liberty.sc2mod</code>, as it has most of the game's data, and no missing fields (or so I thought). After fiddling with <code>cascview</code> a bit more, I realized I was missing <code>core.sc2mod</code>, which has <em>base class definitions for most of the structs</em>. Whoops.<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CWeapon</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">default</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Name</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Weapon/Name/##id##<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">DisplayName</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Weapon/Name/##id##<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Neutral<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    ...
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">DisplayEffect</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>##id##<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">MinScanRange</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>5<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Range</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>5<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">RangeSlop</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">TeleportResetRange</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>500<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ArcSlop</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>11.25<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Period</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.8332<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">DamagePoint</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.167<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Backswing</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.5<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    ...
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CWeapon</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CWeaponLegacy</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">default</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    ...
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">RandomDelayMin</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>-0.0625<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">RandomDelayMax</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.125<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Effect</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>##id##<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    ...
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CWeaponLegacy</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>Ah. Those <code>##id##</code> tags are, I think, used for "creation wizards" within the editor, and function like placeholders in format strings. We can confirm this by looking up the name of the Stalker's weapon in <code>effectdata.xml</code>.<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectLaunchMissile</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ParticleDisruptors<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ImpactEffect</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ParticleDisruptorsU<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ValidatorArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>StalkerTargetFilters<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ValidatorArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span><span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">AmmoUnit</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>StalkerWeapon<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectLaunchMissile</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>Okay... but where's the <code>Mover</code>? Maybe it's from the base class of <code>CEffectLaunchMissile</code>?<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectLaunchMissile</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">default</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">DeathType</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Impact<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Flags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>PointFallback<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Flags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ValidateAbil<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Flags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ValidateBenign<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Flags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ValidateTeleport<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Flags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ValidateWeapon<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Visibility</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Snapshot<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">AmmoOwner</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Creator<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">AmmoUnit</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>##id##Weapon<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ValidatorArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>##id##TargetFilters<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">LaunchLocation</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>SourceUnit<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ImpactLocation</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>TargetUnit<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PlacementAround</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Unknown<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectLaunchMissile</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>Uh... huh. So <code>Movers</code> aren't a default part of this struct, they were explicitly added to the marauder's missile. So how does the stalker's missile know how to move? I guess we can look up the <code>AmmoUnit</code>? I'm not sure exactly what that is, but it's the only thing that seems like it might have a mover. It's got "unit" in the name, so lets try <code>unitdata.xml</code>.<pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CUnit</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>StalkerWeapon<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">parent</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>MISSILE<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Race</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Prot<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ObjectType:Projectile,ObjectFamily:Melee<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CUnit</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>Still no <code>Mover</code>. At least we have an all-caps <code>parent</code> attribute, so lets head back over to <code>core.sc2mod</code> and look up what <code>MISSILE</code> is.<pre class="language-XML z-code" data-lang=XML><code class=language-XML data-lang=XML><span class="z-text z-xml"> <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CUnit</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">default</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>MISSILE<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    ...
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">LifeStart</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>10<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">LifeMax</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>10<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Mover</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>##id##<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    ...
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CUnit</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre><p>Hey, there it is!<p>Not everything is this bad, but everything is its own brand of pain. You want to know how much the damage increases per upgrade? Head on down to <code>upgradedata.xml</code>. Build time? That's tied to the buildings themselves, which are in <code>unitdata.xml</code>, but training units its treated as a <em>spell</em>, so you also need to have <code>abildata.xml</code> handy. You don't even want to <em>know</em> how awful the Colossus attack is. Expand this at your own risk:<details><summary>Beware, unspeakable horrors inside</summary> <pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectSet</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLances<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EffectArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesForward<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EffectArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesReverse<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectSet</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre> <p>2 beams, 2 effects, pretty straight forward. Probably not much more complicated than the zealot's attacks</p> <pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectCreatePersistent</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesForward<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ExpireDelay</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.375<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodCount</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>11<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Marker</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">MatchFlags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Id<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">Marker</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">WhichLocation</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>TargetUnit<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">TimeScaleSource</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Caster<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Flags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Channeled<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicEffectArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesE<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>-1.25,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>-1,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>-0.75,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>-0.5,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>-0.25,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.25,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.5,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.75,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1.25,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicPeriodArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.0312<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ExpireEffect</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesMU<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectCreatePersistent</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectCreatePersistent</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesReverse<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ExpireDelay</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.375<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodCount</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>11<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Marker</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">        <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">MatchFlags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Id<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">Marker</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">WhichLocation</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>TargetUnit<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">TimeScaleSource</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Caster<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Flags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Channeled<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicEffectArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesEReverse<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1.25,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.75,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.5,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.25,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>-0.25,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>-0.5,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>-0.75,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>-1,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicOffsetArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>-1.25,0,0<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">PeriodicPeriodArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.0312<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ExpireEffect</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesMU<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectCreatePersistent</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre> <p>Oh. Oh <em>no</em>. It's not a rectangular collision check, it's 11 individual circular checks that happen really quickly one after another with <em>eleven</em> small positional offsets. Oh you think that's bad? The hellion attack has <em>twenty four</em>.</p> <p>And don't think the movement was the only thing that ended up duplicated</p> <pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectEnumArea</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesE<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">SearchFilters</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Ground;Player,Ally,Missile,Stasis,Dead,Hidden,Invulnerable<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">AreaArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Radius</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.15<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Effect</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesDamageDelay<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">SearchFlags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>CallForHelp<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ExcludeArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Target<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectEnumArea</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectEnumArea</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesEReverse<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">SearchFilters</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Ground;Player,Ally,Missile,Stasis,Dead,Hidden,Invulnerable<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">AreaArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Radius</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.15<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Effect</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesDamageDelay<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">SearchFlags</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">index</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>CallForHelp<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>1<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ExcludeArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Target<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectEnumArea</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre> <p>And here's the actual damage numbers</p> <pre class="language-xml z-code" data-lang=xml><code class=language-xml data-lang=xml><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectDamage</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesMU<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">parent</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>DU_WEAP<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Visibility</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Visible<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Kind</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Splash<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">KindSplash</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Splash<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Amount</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>20<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ValidatorArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesCliffLevel<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ValidatorArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>NotHidden<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ValidatorArray</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>noMarkers<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">Death</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Fire<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectDamage</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectCreatePersistent</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">id</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesDamageDelay<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">EditorCategories</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>Race:Protoss<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">WhichLocation</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>TargetUnit<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">ExpireDelay</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>0.25<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml"><</span><span class="z-entity z-name z-tag z-localname z-xml">FinalEffect</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">value</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">"</span>ThermalLancesMU<span class="z-punctuation z-definition z-string z-end z-xml">"</span></span><span class="z-punctuation z-definition z-tag z-end z-xml">/></span></span>
</span><span class="z-text z-xml"><span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&LT/</span><span class="z-entity z-name z-tag z-localname z-xml">CEffectCreatePersistent</span><span class="z-punctuation z-definition z-tag z-end z-xml">></span></span>
</span></code></pre> <p>Ick.</p></details><br><p>Don't forget about the myriad of weird exceptions and non-standard names and unexpected interrelationships.<ul><li>Lurkers aren't called Lurker, they're called "LurkerMP".<li>The siege tank doesn't have it's siege-mode gun in its <code>WeaponArray</code>, that's in an entirely separate unit called "SiegeTankSieged". Oh yeah, and LurkerMP doesn't have a weapon, only "LurkerMPBurrowed", because every zerg ground unit has an entirly separate "Burrowed" counterpart.<li>The thor is split between 2 entities, one for each AA mode, but that means both contain identical copies of the anti-ground weapon.<li>There are parent classes <code>DU_WEAP</code>, <code>DU_WEAP_MISSILE</code>, and <code>DU_WEAP_SPLASH</code>. The latter 2 have <code>DU_WEAP</code> as a parent, but set the <code>Kind</code> value to <code>Ranged</code> and <code>Splash</code> respectively. Can that be used as a shorthand to determine if something is ranged/melee/splash? Haha. Nope. There are lots of exceptions, like the Viking's missiles that have a parent of <code>DU_WEAP_SPLASH</code>, but then manually set the <code>Kind</code> to <code>Ranged</code>, invalidating the only unique factor of its parent class.<li>As far as I can tell, there's no indication for hitscan vs projectile besides the absence of a <code>Mover</code> and/or <code>CEffectLaunchMissile</code> (which are both somewhat annoying to check for)<li>It's not always clear when something has been removed in a new patch.</ul><h2 id=wrangling>Wrangling<a aria-hidden=true class=anchor hidden href=#wrangling>#</a></h2><p>This process was kinda messy. I'm parsing 5 "generations" of 6 files, and each of those files frequently link to other objects in other files. I spent a long time trying to "route" the parser and cleanly get all the info I needed in 1 pass with carefully ordered stream-parsing and stored links for data that's needed later. In the end, I just shoved everything into hashmaps like <code>serde_json</code>, as it allows me to correct mistakes or add/remove data from the final output much more easily.<p>Having the documents and maps be <code>'static</code> saves a bunch of headaches later. Normally, I'd use <code>lazy_static</code> for this sort of thing, but I tried out the <code>static_init</code> crate and was pleasantly surprised. It doesn't really function much differently for the user, but I find the attribute macro to be less noisy than the top-level function-like macro that <code>lazy_static</code> uses. I've heard <code>static_init</code> also initializes before <code>fn main()</code> is run rather than the first time the object is accessed, so that's neat. As always, the <code>paste</code> crate comes in handy for defining new identifiers inside macros:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-keyword z-macrorules z-rust">macro_rules!</span> <span class="z-entity z-name z-macro z-rust">include_data</span> <span class="z-meta z-macro z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span></span><span class="z-meta z-macro z-rust">
</span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-matchers z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">(</span><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">ident</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-parameter z-rust">y</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">literal</span><span class="z-punctuation z-section z-block z-end z-rust">)</span></span> <span class="z-keyword z-operator z-symbol z-rust">=></span> <span class="z-meta z-macro z-transcribers z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-support z-macro z-rust">paste!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-storage z-modifier z-rust">pub</span> <span class="z-variable z-local z-rust">const</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-keyword z-operator z-underscore z-rust">_</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_WOL</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-type z-primitive z-rust">str</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-macro z-rust">include_str!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">        <span class="z-support z-macro z-rust">concat!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-raw z-rust"><span class="z-storage z-type z-string z-rust">r</span><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>..\..\mods\liberty.sc2mod\base.sc2data\gamedata\<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">y</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>.xml<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">        <span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-storage z-modifier z-rust">pub</span> <span class="z-variable z-local z-rust">const</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-keyword z-operator z-underscore z-rust">_</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_HOTS</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-type z-primitive z-rust">str</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-macro z-rust">include_str!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">        <span class="z-support z-macro z-rust">concat!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-raw z-rust"><span class="z-storage z-type z-string z-rust">r</span><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>..\..\mods\swarm.sc2mod\base.sc2data\gamedata\<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">y</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>.xml<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">        <span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-storage z-modifier z-rust">pub</span> <span class="z-variable z-local z-rust">const</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-keyword z-operator z-underscore z-rust">_</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_LOTV</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-type z-primitive z-rust">str</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-macro z-rust">include_str!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">        <span class="z-support z-macro z-rust">concat!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-raw z-rust"><span class="z-storage z-type z-string z-rust">r</span><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>..\..\mods\void.sc2mod\base.sc2data\gamedata\<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">y</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>.xml<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">        <span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-storage z-modifier z-rust">pub</span> <span class="z-variable z-local z-rust">const</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-keyword z-operator z-underscore z-rust">_</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_MULTI</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-type z-primitive z-rust">str</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-macro z-rust">include_str!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">        <span class="z-support z-macro z-rust">concat!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-raw z-rust"><span class="z-storage z-type z-string z-rust">r</span><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>..\..\mods\voidmulti.sc2mod\base.sc2data\gamedata\<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">y</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>.xml<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">        <span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-meta z-path z-rust"><span class="z-variable z-annotation z-rust">dynamic</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-variable z-local z-rust">static</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_WOL</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-storage z-type z-any z-rust">Document</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-storage z-type z-source z-rust">Document</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">parse</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-keyword z-operator z-underscore z-rust">_</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_WOL</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">unwrap</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-meta z-path z-rust"><span class="z-variable z-annotation z-rust">dynamic</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-variable z-local z-rust">static</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_HOTS</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-storage z-type z-any z-rust">Document</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-storage z-type z-source z-rust">Document</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">parse</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-keyword z-operator z-underscore z-rust">_</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_HOTS</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">unwrap</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-meta z-path z-rust"><span class="z-variable z-annotation z-rust">dynamic</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-variable z-local z-rust">static</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_LOTV</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-storage z-type z-any z-rust">Document</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-storage z-type z-source z-rust">Document</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">parse</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-keyword z-operator z-underscore z-rust">_</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_LOTV</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">unwrap</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-meta z-path z-rust"><span class="z-variable z-annotation z-rust">dynamic</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-variable z-local z-rust">static</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_MULTI</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-storage z-type z-any z-rust">Document</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-storage z-type z-source z-rust">Document</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">parse</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-keyword z-operator z-underscore z-rust">_</span> <span class="z-variable z-macrometa z-rust"><span class="z-keyword z-operator z-symbol z-rust">$</span><span class="z-variable z-local z-rust">x</span></span> <span class="z-constant z-other z-rust">_MULTI</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">unwrap</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-macro z-rust"><span class="z-meta z-macro z-transcribers z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">include_data!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-other z-rust">UNIT</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>unitdata<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">include_data!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-other z-rust">WEAPON</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>weapondata<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">include_data!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-other z-rust">EFFECT</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>effectdata<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">include_data!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-other z-rust">ABIL</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>abildata<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">include_data!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-other z-rust">UPGRADE</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>upgradedata<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">include_data!</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-other z-rust">MOVER</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>moverdata<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>You'll notice that I didn't include the <code>core</code> data at all. I found it easier to bake the <code>core</code> data into the parser's invariants since it's all "abstract classes" anyway.<p>The code isn't too complex; each file has a bespoke function that initializes each of its top-level nodes with appropriate defaults, and then lets a generic recursive function handle the child and nested-child nodes. Since everything is a string, there's not a huge need for the data-types enum that <code>serde-json</code> uses. Everything just gets shoved in this recursive <code>Tag</code> struct to be sorted later.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-keyword z-rust">type</span> <span class="z-entity z-name z-type z-rust">Map</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-identifier z-rust">K</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-identifier z-rust">V</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-generic z-rust"><span class="z-storage z-type z-any z-rust">IndexMap</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-identifier z-rust">K</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-identifier z-rust">V</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-identifier z-rust">FxBuildHasher</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-meta z-path z-rust"><span class="z-variable z-annotation z-rust">derive</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Debug<span class="z-punctuation z-separator z-rust">,</span> Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-keyword z-rust">struct</span> <span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Tag</span></span></span><span class="z-meta z-struct z-rust"> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-modifier z-rust">pub</span> <span class="z-variable z-other z-member z-rust">kind</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-symbol z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> <span class="z-storage z-type z-primitive z-rust">str</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-modifier z-rust">pub</span> <span class="z-variable z-other z-member z-rust">attrs</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-storage z-type z-any z-rust">Map</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-symbol z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> <span class="z-storage z-type z-primitive z-rust">str</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-symbol z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> <span class="z-storage z-type z-primitive z-rust">str</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-modifier z-rust">pub</span> <span class="z-variable z-other z-member z-rust">children</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-storage z-type z-any z-rust">Map</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-symbol z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> <span class="z-storage z-type z-primitive z-rust">str</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-identifier z-rust">Tag</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-keyword z-rust">impl</span> </span><span class="z-meta z-impl z-rust"><span class="z-entity z-name z-impl z-rust">Tag</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> <span class="z-entity z-name z-function z-rust">new</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">kind</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-symbol z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> <span class="z-storage z-type z-primitive z-rust">str</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">attrs</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-storage z-type z-any z-rust">Map</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-symbol z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> <span class="z-storage z-type z-primitive z-rust">str</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-symbol z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> <span class="z-storage z-type z-primitive z-rust">str</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-keyword z-other z-self z-rust">Self</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-other z-self z-rust">Self</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-variable z-local z-rust">kind</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-variable z-local z-rust">attrs</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-variable z-local z-rust">children</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Default</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">default</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>The <code>Array</code> type is worth talking about further. Arrays are <em>sometimes</em> nested within some sort of bespoke container (e.g. <code>CardLayouts</code>), but often aren't (e.g. <code>WeaponArray</code>). I had to add in a bit of special handling for arrays, since they're usually designated by repeated tags, which would end up overwriting each other. There's some added complexity because in subsequent patches, array contents are accessed by index, but we want to access them by the name of the object contained within. Since insertion order matters, I went with <code>IndexMap</code> rather than the trusty <code>FxHashMap</code> that I normally opt for. Every time I use hashmaps in Rust, I always default to <code>.get()</code>. I end up thinking to myself "surely someone must have thought that hashmaps need an <code>update_or_insert()</code> so you don't always have to resort to <code>match</code>/<code>if let</code>", and then I remember <code>.entry()</code> exists and does exactly what I want. If you haven't used that api before, definitely look into it.<p>First things first, we have to handle those arrays. To make the structure more consistent, I'm artificially putting all array elements into their own containers. That means we need to<ol><li>Detect flat arrays and container arrays<li>Make flat arrays into container arrays<li>update or insert whatever data belongs at that location</ol><p>I've commented this code pretty heavily because there's a lot of possible execution paths and the hoops I have to jump through with Rust's conditional constructs don't map very cleanly to what the code means semantically. I'm sure there's a cleaner way to write this, but it is what it is.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> There are some arrays that don't align to these 2 conditions
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> but I don't need the data from them
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">if</span> <span class="z-variable z-local z-rust">child</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">tag_name</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">name</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">ends_with</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Array<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-logical z-rust">||</span> <span class="z-variable z-local z-rust">child</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">tag_name</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">name</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-comparison z-rust">==</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Flags<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>\
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `entry` acts as the "container" for the array (think of its type as `Vec`),
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> the elements are stored in its `children` map
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-keyword z-rust">let</span> <span class="z-variable z-local z-rust">entry</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-variable z-local z-rust">map</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">entry</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">name</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">or_insert</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-source z-rust">Tag</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-local z-rust">kind</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-variable z-local z-rust">name</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-local z-rust">attrs</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Default</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">default</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-local z-rust">children</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Default</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">default</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-keyword z-rust">let</span> <span class="z-variable z-local z-rust">elements</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-local z-rust">entry</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-local z-rust">children</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> <span class="z-storage z-type z-keyword z-rust">let</span> <span class="z-storage z-type z-rust">Some</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-variable z-local z-rust">idx</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-variable z-local z-rust">attrs</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">get</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>index<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">match</span> <span class="z-variable z-local z-rust">idx</span><span class="z-punctuation z-accessor z-dot z-rust"><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">parse</span><span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-storage z-type z-primitive z-rust">usize</span><span class="z-keyword z-operator z-comparison z-rust">></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-type z-variant z-rust">Ok</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">x</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-fatarrow z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> If the numeric index doesn't exist in the map, we insert and
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> use the numeric index is used as a key since there isn't really
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> an alternative
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-keyword z-control z-rust">if</span> <span class="z-variable z-local z-rust">elements</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">get_index_entry</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">x</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">is_none</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                    <span class="z-variable z-local z-rust">elements</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">insert</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                        <span class="z-variable z-local z-rust">idx</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                        <span class="z-storage z-type z-source z-rust">Tag</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                            <span class="z-variable z-local z-rust">kind</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-variable z-local z-rust">name</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                            <span class="z-variable z-local z-rust">attrs</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                            <span class="z-variable z-local z-rust">children</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Default</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">default</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                    <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-control z-rust">else</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                    <span class="z-variable z-function z-rust">update_attrs</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-variable z-local z-rust">attrs</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-local z-rust">elements</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-local z-rust">x</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-local z-rust">attrs</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> If this is one of the nested array structures, recurse using the
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> container's element map to store the nodes
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-keyword z-control z-rust">if</span> <span class="z-variable z-local z-rust">child</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">has_children</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                    <span class="z-variable z-function z-rust">init_children</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                        <span class="z-variable z-local z-rust">child</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">children</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                        <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-local z-rust">elements</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">get_index_mut</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">x</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">unwrap</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-local z-rust">children</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                    <span class="z-punctuation z-section z-group z-end z-rust">)</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Index is not a number, so it's probably a new element
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-type z-variant z-rust">Err</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-underscore z-rust">_</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-fatarrow z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-storage z-type z-keyword z-rust">let</span> <span class="z-variable z-local z-rust">entry</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-variable z-local z-rust">elements</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">entry</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">idx</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">and_modify</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-variable z-function z-rust">update_attrs</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-variable z-local z-rust">attrs</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-local z-rust">x</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-local z-rust">attrs</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">or_insert</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-source z-rust">Tag</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">new</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">idx</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-local z-rust">attrs</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-keyword z-control z-rust">if</span> <span class="z-variable z-local z-rust">child</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">has_children</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                    <span class="z-variable z-function z-rust">init_children</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">child</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">children</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-local z-rust">entry</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-local z-rust">children</span><span class="z-punctuation z-section z-group z-end z-rust">)</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-control z-rust">else</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> the extra bit of nonsense is because we need &'static str and this is more
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> "robust" than defining a const array for number -> str conversion. The leak
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> hardly matters for such a short running program
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-local z-rust">elements</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">insert</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-variable z-local z-rust">elements</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">len</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">to_string</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">leak</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-storage z-type z-source z-rust">Tag</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-variable z-local z-rust">kind</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-variable z-local z-rust">name</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-variable z-local z-rust">attrs</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-variable z-local z-rust">children</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Default</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">default</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-keyword z-operator z-range z-rust">...</span>
</span></span></code></pre><p>Whew, alright. A bit complicated, but it works. Luckily, the other two cases are very simple. If it's a flat node, we're only really required to update or insert the attributes. If it's not an array but it does have children, we can simply recurse using the entry's <code>children</code> map as our new base <code>map</code>.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-operator z-range z-rust">...</span>
</span><span class="z-source z-rust">} <span class="z-keyword z-control z-rust">else</span> <span class="z-keyword z-control z-rust">if</span> <span class="z-keyword z-operator z-logical z-rust">!</span><span class="z-variable z-local z-rust">child</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">has_children</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-local z-rust">map</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">entry</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">name</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">and_modify</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-variable z-function z-rust">update_attrs</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-variable z-local z-rust">attrs</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-local z-rust">x</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-local z-rust">attrs</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">or_insert</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-source z-rust">Tag</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">new</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">name</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-local z-rust">attrs</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-control z-rust">else</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-keyword z-rust">let</span> <span class="z-variable z-local z-rust">entry</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-variable z-local z-rust">map</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">entry</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">name</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">and_modify</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-variable z-function z-rust">update_attrs</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-variable z-local z-rust">attrs</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-local z-rust">x</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-local z-rust">attrs</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">or_insert</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-source z-rust">Tag</span><span class="z-method z-rust"><span class="z-punctuation z-accessor z-rust">::</span><span class="z-variable z-function z-rust">new</span></span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">name</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-local z-rust">attrs</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-function z-rust">init_children</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-local z-rust">child</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-function z-rust">children</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-local z-rust">entry</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-variable z-local z-rust">children</span><span class="z-punctuation z-section z-group z-end z-rust">)</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><p>All files are parsed fully up-front, and that makes routing a non-issue since I can access whatever I want without having to worry about storing links for later. The xml data has some tags used by the editor to help group specific objects, and I can piggyback off of that to filter the unit map for only the units and structures that can appear in 1v1 matches. By checking what units can actually be produced by each of the structures, I can filter it down even further to only those units that are a part of the <em>current</em> 1v1 ruleset. Parts of the list need to be hand-made to accommodate abilities that transform units into other units, but that's not too bad. Once I have a list of units, I can grab their weapon data links, traverse the spaghetti to figure out what "kind" of attack it is, if it has a mover, etc.<p>As verbose as Rust can be some times, it gives me a lot of peace of mind when wiring up this sort of thing. There's a lot of possible paths, but I'm not allowed to ignore any, so the program either instantly crashed upon an incorrect assumption, or worked perfectly. It took very little debugging to get the output I wanted, and that's not because I made no mistakes. I might have been able to hit the "run" button faster with Python, but I likely would lost more time than I gained by tracking down the silent failures that I assumed wouldn't occur.<h1 id=codegen>Codegen<a aria-hidden=true class=anchor hidden href=#codegen>#</a></h1><p>It's not difficult or complicated, since it's just some const struct definitions. It ends up as a bunch of format strings, with some conditional logic to handle things like how many weapons a unit has.<p>As I was writing it though, I realized that the old shape of my structs no longer really fit. Now that I have a clear picture of all of the factors involved, it's obvious that I need to make more sweeping architectural decisions right now, and that my prior plans were way too crude. Unfortunately, this means I can't <em>quite</em> finish the codegen, as I need to know how my structs need to look. To know how they need to look, I need to know how the data will be used. To know how the data will be used, I need to decide exactly what kind of "simulation" I'm going for, which will be the topic of the next post.</div><footer class=post-footer><ul class=post-tags><li><a href=https://walnut356.github.io/tags/starcraft/>starcraft</a><li><a href=https://walnut356.github.io/tags/games/>games</a><li><a href=https://walnut356.github.io/tags/programming/>programming</a><li><a href=https://walnut356.github.io/tags/rust/>rust</a></ul><nav class=paginav><a class=prev href=https://walnut356.github.io/posts/simulating-starcraft-p1/> <span class=title>« Prev</span> <br> <span>Simulating Starcraft Part 1 - Tracer Bullet</span> </a><a class=next href=https://walnut356.github.io/posts/partial-borrow-pointer-ub/> <span class=title>Next »</span> <br> <span>Bypassing the borrow checker - do ref -> ptr -> ref partial borrows cause UB?</span> </a></nav></footer></article></main><footer class=footer><span>© 2025 <a href=https://walnut356.github.io>Walnut356</a></span><span> Powered by <a rel="noopener noreferrer" href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/cydave/zola-theme-papermod rel=noopener target=_blank>PaperMod</a> </span></footer><a aria-label="go to top" title="Go to Top (Alt + G)" accesskey=g class=top-link href=#top id=top-link> <svg viewbox="0 0 12 6" fill=currentColor xmlns=http://www.w3.org/2000/svg><path d="M12 6H0l6-6z"/></svg> </a><script>let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });</script><script>var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };</script><script>document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })</script><script>document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';
        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                var content = codeblock.textContent;
                if(codeblock.firstChild.tagName == 'TABLE') {
                    content = Array(...codeblock.firstChild.getElementsByTagName('span')).map((span) => { return span.textContent; }).join('');
                }
                navigator.clipboard.writeText(content);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            // td containing LineNos
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            // table containing LineNos and code
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            // code blocks not having highlight as parent class
            codeblock.parentNode.appendChild(copybutton);
        }
    });</script>